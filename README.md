# malware-domain-check-aws-sam

Steps to test locallly

1) You need boto3 client. Install if not already 
    pip install boto3

2) Download DynamoDb locally
    https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html
3) Setting the Local Endpoint
    https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.Endpoint.html 
4) Run test/createtable.py 
   python createtable.py
5) validate if table created locally  
   aws dynamodb list-tables --endpoint-url http://localhost:8000 --region us-west-2
6) run test/loaddata.py to load test data into table
   python loaddata.py
7) To see table item update key.json and run the command
  aws dynamodb get-item --table-name MalwareUrlsTable --key file://key.json --endpoint-url http://localhost:8000 --region us-west-2
8) Run sam local start-api --env-vars test/env.json

9) Hit http://127.0.0.1:3000/urlinfo/1/abcd.com and you should see URL is unsafe. Use any other domain you should see URL is safe.



Steps to deploy on AWS

1) create a bucket to hold your deployment package. You can use existing bucket as well
    aws s3 mb s3://<Your Bucket Name> 
2) Run below Command: It should create and package.yaml
    sudo sh package.sh
3) Run below command to deploy 
    sh deploy.sh
  